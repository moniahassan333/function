

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Task Manager Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg-dark:#797d86;
  --card-dark:#1e293b;
  --text:#e5e7eb;
  --blue:#4a556b;
  --blue2:#47626f;
  --danger:#ef4444;
  --success:#22c55e;
}

*{box-sizing:border-box;font-family:'Cairo',sans-serif;margin:0;padding:0}

body{
  display:flex;
  background:var(--bg-dark);
  color:var(--text);
  min-height:100vh;
}

/* Sidebar */
.sidebar{
  width:250px;
  background:var(--card-dark);
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:20px;
}

.sidebar h2{
  text-align:center;
  margin-bottom:20px;
  color:var(--blue2);
}

.sidebar button{
  background:none;
  border:none;
  color:var(--text);
  text-align:right;
  padding:12px;
  font-size:16px;
  cursor:pointer;
  border-radius:8px;
  transition:0.2s;
}

.sidebar button:hover{
  background:var(--blue);
  color:#fff;
}

/* Main content */
.main{
  flex:1;
  padding:30px;
  display:flex;
  flex-direction:column;
  gap:50px;
}

/* Cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(10px,1fr));
  gap:50px;
  justify-content: center;
  align-items: center;
}


h1{
  text-align: center;
  margin-bottom: 40px;
  font-size: 2rem;
  color: var(--card-dark);

}


.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ø±Ø¯ */
  gap: 50px;
  justify-content: center;  /* ÙˆØ³Ø· Ø§Ù„ÙƒØ§Ø±Ø¯Ø§Øª Ø£ÙÙ‚ÙŠØ§Ù‹ */
  align-items: center;      /* ÙˆØ³Ø· Ø§Ù„ÙƒØ§Ø±Ø¯Ø§Øª Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
}

.card{
  position: relative;
  width: 300px;             /* Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª */
  height: 150px;            /* Ø·ÙˆÙ„ Ø«Ø§Ø¨Øª */
  background: rgba(31, 41, 55, 0.8); /* Ø®Ù„ÙÙŠØ© Ø´Ø¨Ù‡ Ø´ÙØ§ÙØ© */
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  overflow: hidden;
  backdrop-filter: blur(10px); /* ØªØ£Ø«ÙŠØ± Ø²Ø¬Ø§Ø¬ÙŠ */
  transition: transform 0.3s, box-shadow 0.3s;
  text-align: center;
}

.card::before{
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(120deg, rgba(255,255,255,0.2), rgba(255,255,255,0));
  transform: rotate(25deg);
  pointer-events: none;
  animation: shine 3s infinite;
}

@keyframes shine {
  0% { transform: rotate(25deg) translateX(-100%); }
  50% { transform: rotate(25deg) translateX(100%); }
  100% { transform: rotate(25deg) translateX(-100%); }
}

.card:hover{
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.5);
}




.card{
  background:var(--card-dark);
  padding:25px;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  text-align:center;
}

.card h3{
  margin-bottom:10px;
}

.card p{
  font-size:18px;
  font-weight:bold;
}

/* Create Task */
#taskForm{
  background:var(--card-dark);
  padding:30px;
  border-radius:15px;
  max-width:500px;
  margin:auto;
  display:flex;
  flex-direction:column;
  gap:15px;
}

#taskForm input, #taskForm textarea{
  padding:12px;
  border-radius:8px;
  border:1px solid #555;
  background:#1e293b;
  color:#fff;
}

#taskForm button{
  background:var(--blue);
  color:#fff;
  padding:12px;
  font-weight:bold;
  cursor:pointer;
  border:none;
  border-radius:10px;
  transition:0.2s;
}

#taskForm button:hover{
  background:var(--blue2);
}

/* Tasks List */
.task-item{
  background:var(--card-dark);
  padding:20px;
  border-radius:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:15px;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 10px rgba(104, 100, 100, 0.6);
}

.task-info{
  flex:1;
}

.task-actions button{
  margin-left:10px;
  padding:8px 14px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
  transition:0.2s;
}

.task-actions .edit{background:var(--blue);}
.task-actions .delete{background:var(--danger);}
.task-actions button:hover{opacity:0.9}

.toast{
  position:fixed;
  bottom:20px;
  right:20px;
  background:var(--blue);
  color:#fff;
  padding:15px 25px;
  border-radius:12px;
  display:none;
  z-index:1000;
}
</style>
</head>
<body>

<div class="sidebar">
  <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
  <button onclick="showPage('welcome')">ğŸ  </button>
  <button onclick="showPage('create')">â• Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø©</button>
  <button onclick="showPage('tasks')">ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
  <button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<div class="main">
  <!-- Welcome / Stats -->
  <div id="welcome" class="page">
    <h1>ÙŠ Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡<span id="username"><br>Ù†Ø¸Ù… Ù…Ù‡Ø§Ù…Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ§Ù…Ø§Ù†..</span></h1>
    
    <div class="cards">
      <div class="card">
        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
        <p id="totalTasks">0</p>
      </div>
      <div class="card">
        <h3>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</h3>
        <p id="doneTasks">0</p>
      </div>
      <div class="card">
        <h3>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
        <p id="pendingTasks">0</p>
      </div>
    </div>
  </div>

  <!-- Create Task -->
  <div id="create" class="page" style="display:none">
    <form id="taskForm">
      <input type="text" id="taskTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©" required>
      <textarea id="taskDesc" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©"></textarea>
      <button type="button" onclick="createTask()">Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
    </form>
  </div>

  <!-- Tasks List -->
  <div id="tasks" class="page" style="display:none">
    <div id="tasksList"></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
  if(id==='welcome') loadStats();
  if(id==='tasks') loadTasks();
}

function toast(msg){
  const t=document.getElementById('toast');
  t.innerText=msg;
  t.style.display='block';
  setTimeout(()=>t.style.display='none',3000);
}

/* Backend Integration */
function createTask(){
  const title=document.getElementById('taskTitle').value.trim();
  const desc=document.getElementById('taskDesc').value.trim();
  if(!title){ toast('Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø·Ù„ÙˆØ¨'); return; }

  const f=new FormData();
  f.append('title',title);
  f.append('description',desc);

  fetch('backend.php?action=create_task',{method:'POST',body:f})
  .then(r=>r.json())
  .then(d=>{
    toast(d.message);
    if(d.success){
      document.getElementById('taskTitle').value='';
      document.getElementById('taskDesc').value='';
    }
  });
}

function loadTasks(){
  fetch('backend.php?action=read_tasks')
  .then(r=>r.json())
  .then(d=>{
    const list=document.getElementById('tasksList');
    list.innerHTML='';
    if(d.tasks){
      d.tasks.forEach(t=>{
        const div=document.createElement('div');
        div.className='task-item';
        div.innerHTML=`
          <div class="task-info">
            <strong>${t.title}</strong><br>
            <small>${t.description||''}</small>
          </div>
          <div class="task-actions">
            <button class="edit" onclick="updateTask(${t.id})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="delete" onclick="deleteTask(${t.id})">Ø­Ø°Ù</button>
          </div>
        `;
        list.appendChild(div);
      });
    }
  });
}

function updateTask(id){
  const newTitle=prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯:');
  const newDesc=prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ÙˆØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯:');
  if(!newTitle) return;

  const f=new FormData();
  f.append('task_id',id);
  f.append('title',newTitle);
  f.append('description',newDesc);

  fetch('backend.php?action=update_task',{method:'POST',body:f})
  .then(r=>r.json())
  .then(d=>{
    toast(d.message);
    loadTasks();
  });
}

function deleteTask(id){
  if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) return;
  const f=new FormData();
  f.append('task_id',id);
  fetch('backend.php?action=delete_task',{method:'POST',body:f})
  .then(r=>r.json())
  .then(d=>{
    toast(d.message);
    loadTasks();
  });
}

function loadStats(){
  fetch('backend.php?action=read_tasks')
  .then(r=>r.json())
  .then(d=>{
    if(d.tasks){
      document.getElementById('totalTasks').innerText=d.tasks.length;
      document.getElementById('doneTasks').innerText=d.tasks.filter(t=>t.status==='done').length;
      document.getElementById('pendingTasks').innerText=d.tasks.filter(t=>t.status==='pending').length;
    }
  });
}

function logout(){
  fetch('backend.php?action=logout').then(()=>location.href='index.html');
}
</script>

</body>
</html>


